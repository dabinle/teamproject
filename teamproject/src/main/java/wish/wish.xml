<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="wish">
	<insert id="wish_insert">
		insert into wish(wishNum, userID, productNum) values(seq_wish.nextval,#{userID},#{productNum})
	</insert>
	
	<!-- 찜 이미 했는지 확인 -->
	<select id="wish_count" resultType="int">
		select count(*) 
		from wish w, product p, member m
		where w.productNum = p.productNum and m.userID = w.userID
		and productNum=#{productNum} AND userID=#{userID}
	</select>
	
	<select id="wish_getproductList" resultType="map">
	    select p.productNum, p.productName, p.price, p.productImage, c.companyName, pc.p_categoryName
	    from wish w
	    join product p on w.productNum = p.productNum
	    join company c on p.companyNum = c.companyNum
	    join product_category pc on p.p_categoryNum = pc.p_categoryNum
	    where w.userID = #{userID}
	    order by w.wishNum DESC
	</select>

	<delete id="wish_delete">
	    delete from wish 
	    where productNum = #{productNum} 
	    and userID = #{userID}
	</delete>

</mapper>