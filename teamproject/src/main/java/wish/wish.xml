<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="wish">
	<insert id="wish_insert">
		insert into wish values(seq_wish.nextval,#{userID},#{productNum})
	</insert>
	
	<select id="detail_wish" resultType="wish.WishDTO">
		select userID, productNum
		from wish
		where wishNum = #{wishNum}		
	</select>
	
	<!-- 찜 이미 했는지 확인 -->
	<select id="wish_count" resultType="int">
		select count(*) 
		from wish w, product p
		where w.productNum = p.productNum
		and productNum=#{productNum} and userID=#{userID}
	</select>
	
	<select id="wish_list" resultType="wish.WishDTO">
		select wishNum, p.productNum, p.productName, p.price, p.productImage
		from wish w, product p
		where w.productNum = p.productNum and userID = #{userID}
		order by wishNum desc
	</select>
	
	<delete id="wish_delete_all">
		delete from wish
		where userID = #{userID}
	</delete>
	
	<delete id="wish_delete_selected">
	    delete from wish 
	    where wishNum = #{wishNum} 
	</delete>

</mapper>